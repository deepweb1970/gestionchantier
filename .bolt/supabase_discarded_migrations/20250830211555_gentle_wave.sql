/*
  # Insertion des données de petit matériel

  1. Données initiales
    - Insertion du petit matériel de test
    - Insertion des prêts de test
  2. Sécurité
    - Les politiques RLS sont déjà en place
*/

-- Insertion du petit matériel
INSERT INTO petit_materiel (
  id,
  nom,
  type,
  marque,
  modele,
  numero_serie,
  code_barre,
  date_achat,
  valeur,
  statut,
  localisation,
  description,
  quantite_stock,
  quantite_disponible,
  seuil_alerte,
  poids,
  dimensions,
  garantie,
  fournisseur
) VALUES 
(
  'pm-001',
  'Perceuse sans fil Bosch',
  'Outillage électroportatif',
  'Bosch',
  'GSR 18V-60 C',
  'BSH18V001',
  '3165140123456',
  '2023-03-15',
  189.99,
  'disponible',
  'Dépôt principal',
  'Perceuse-visseuse sans fil 18V avec 2 batteries',
  5,
  4,
  2,
  1.2,
  '25x8x22 cm',
  '2026-03-15',
  'Bosch Professional'
),
(
  'pm-002',
  'Marteau perforateur Hilti',
  'Outillage électroportatif',
  'Hilti',
  'TE 7-C',
  'HIL7C002',
  '7612345678901',
  '2023-05-20',
  450.00,
  'prete',
  'Chantier Villa Moderne',
  'Marteau perforateur SDS-Plus 720W',
  2,
  1,
  1,
  2.8,
  '35x9x24 cm',
  '2026-05-20',
  'Hilti Store'
),
(
  'pm-003',
  'Niveau laser Leica',
  'Instrument de mesure',
  'Leica',
  'Lino L2',
  'LEI2L003',
  '7640110123456',
  '2023-01-10',
  320.00,
  'disponible',
  'Dépôt principal',
  'Niveau laser en croix avec support magnétique',
  3,
  3,
  1,
  0.8,
  '15x10x8 cm',
  '2026-01-10',
  'Leica Geosystems'
),
(
  'pm-004',
  'Scie circulaire Makita',
  'Outillage électroportatif',
  'Makita',
  'HS7601',
  'MAK7601004',
  '0088381123456',
  '2023-07-08',
  280.00,
  'maintenance',
  'Atelier',
  'Scie circulaire 1200W lame 190mm',
  4,
  3,
  2,
  4.1,
  '30x25x25 cm',
  '2026-07-08',
  'Makita France'
),
(
  'pm-005',
  'Échafaudage mobile',
  'Équipement de sécurité',
  'Altrad',
  'PIRL 135',
  'ALT135005',
  '3700123456789',
  '2022-11-25',
  1200.00,
  'disponible',
  'Dépôt principal',
  'Échafaudage mobile aluminium hauteur 1.35m',
  2,
  2,
  1,
  45.0,
  '135x75x180 cm',
  '2025-11-25',
  'Altrad Group'
),
(
  'pm-006',
  'Casques de sécurité',
  'EPI',
  'Uvex',
  'Pheos B',
  'UVX-PHEOS-006',
  '4031101234567',
  '2023-09-12',
  25.00,
  'disponible',
  'Dépôt principal',
  'Casques de sécurité avec jugulaire',
  20,
  15,
  5,
  0.4,
  '28x22x16 cm',
  '2028-09-12',
  'Uvex Safety'
),
(
  'pm-007',
  'Meuleuse d\'angle Dewalt',
  'Outillage électroportatif',
  'Dewalt',
  'DWE4157',
  'DEW4157007',
  '5035048123456',
  '2023-04-18',
  95.00,
  'prete',
  'Chantier Appartement Haussmannien',
  'Meuleuse d\'angle 125mm 900W',
  6,
  4,
  2,
  1.8,
  '28x8x15 cm',
  '2026-04-18',
  'Dewalt Industrial'
),
(
  'pm-008',
  'Échelles télescopiques',
  'Équipement d\'accès',
  'Hailo',
  'FlexLine 380',
  'HAI380008',
  '4007126123456',
  '2023-02-28',
  180.00,
  'disponible',
  'Dépôt principal',
  'Échelle télescopique aluminium 3.8m',
  3,
  3,
  1,
  12.5,
  '380x45x15 cm',
  '2026-02-28',
  'Hailo Professional'
);

-- Insertion des prêts de petit matériel
INSERT INTO prets_petit_materiel (
  id,
  petit_materiel_id,
  ouvrier_id,
  chantier_id,
  date_debut,
  date_fin,
  date_retour_prevue,
  date_retour_effective,
  quantite,
  statut,
  notes,
  etat_depart,
  etat_retour
) VALUES 
(
  'pret-001',
  'pm-002',
  (SELECT id FROM ouvriers WHERE email = 'jean.dubois@chantier.com' LIMIT 1),
  (SELECT id FROM chantiers WHERE nom = 'Construction Villa Moderne' LIMIT 1),
  '2024-01-15',
  NULL,
  '2024-01-25',
  NULL,
  1,
  'en_cours',
  'Prêt pour perçage fondations',
  'bon',
  NULL
),
(
  'pret-002',
  'pm-007',
  (SELECT id FROM ouvriers WHERE email = 'paul.martin@chantier.com' LIMIT 1),
  (SELECT id FROM chantiers WHERE nom = 'Rénovation Appartement Haussmannien' LIMIT 1),
  '2024-01-18',
  NULL,
  '2024-01-28',
  NULL,
  1,
  'en_cours',
  'Découpe carrelage salle de bain',
  'bon',
  NULL
),
(
  'pret-003',
  'pm-003',
  (SELECT id FROM ouvriers WHERE email = 'antoine.rousseau@chantier.com' LIMIT 1),
  (SELECT id FROM chantiers WHERE nom = 'Extension Maison Contemporaine' LIMIT 1),
  '2024-01-10',
  '2024-01-20',
  '2024-01-20',
  '2024-01-20',
  1,
  'termine',
  'Nivellement charpente extension',
  'bon',
  'bon'
),
(
  'pret-004',
  'pm-001',
  (SELECT id FROM ouvriers WHERE email = 'michel.leroy@chantier.com' LIMIT 1),
  (SELECT id FROM chantiers WHERE nom = 'Construction Villa Moderne' LIMIT 1),
  '2024-01-12',
  '2024-01-22',
  '2024-01-22',
  '2024-01-22',
  2,
  'termine',
  'Installation plomberie',
  'bon',
  'moyen'
),
(
  'pret-005',
  'pm-006',
  (SELECT id FROM ouvriers WHERE email = 'sylvie.moreau@chantier.com' LIMIT 1),
  (SELECT id FROM chantiers WHERE nom = 'Immeuble de Bureaux' LIMIT 1),
  '2024-01-20',
  NULL,
  '2024-02-20',
  NULL,
  5,
  'en_cours',
  'Équipement sécurité équipe',
  'neuf',
  NULL
);